<?xml version="1.0"?>
<robot xmlns:xacro="http://wiki.ros.org/xacro" name="kuka_kr150_2_robot">

  <xacro:property name="DEG_TO_RAD" value="${pi/180}"/>
  <xacro:macro name="radians" params="deg">
    ${deg * DEG_TO_RAD}
  </xacro:macro>

  <!-- Make the pedestal/base rigidly fixed in Gazebo -->
  <gazebo reference="base_link">
    <static>true</static>
  </gazebo>

  <link name="base_link">
    <!-- heuristic inertial -->
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="311.25"/>
      <inertia ixx="35.275" ixy="0" ixz="0" iyy="35.275" iyz="0" izz="51.875"/>
    </inertial>

    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/visual/base_link.dae" />
      </geometry>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/collision/base_link.stl" />
      </geometry>
    </collision>
  </link>

  <link name="link_1">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="186.75"/>
      <inertia ixx="13.850625" ixy="0" ixz="0" iyy="13.850625" iyz="0" izz="7.78125"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/visual/link_1.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/collision/link_1.stl" />
      </geometry>
    </collision>
  </link>

  <link name="link_2">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="249.0"/>
      <inertia ixx="38.3875" ixy="0" ixz="0" iyy="38.3875" iyz="0" izz="6.64"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/visual/link_2.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/collision/link_2.stl"  />
      </geometry>
    </collision>
  </link>

  <link name="link_3">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="186.75"/>
      <inertia ixx="20.73703125" ixy="0" ixz="0" iyy="20.73703125" iyz="0" izz="3.8128125"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/visual/link_3.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/collision/link_3.stl"  />
      </geometry>
    </collision>
  </link>

  <link name="link_4">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="124.5"/>
      <inertia ixx="7.57375" ixy="0" ixz="0" iyy="7.57375" iyz="0" izz="1.8675"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/visual/link_4.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/collision/link_4.stl"  />
      </geometry>
    </collision>
  </link>

  <link name="link_5">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="99.6"/>
      <inertia ixx="2.59375" ixy="0" ixz="0" iyy="2.59375" iyz="0" izz="1.0375"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/visual/link_5.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/collision/link_5.stl" />
      </geometry>
    </collision>
  </link>

  <link name="link_6">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="62.25"/>
      <inertia ixx="0.674375" ixy="0" ixz="0" iyy="0.674375" iyz="0" izz="0.415"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/visual/link_6.dae" />
      </geometry>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://kuka_description/meshes/kr150_2/collision/link_6.stl" />
      </geometry>
    </collision>
  </link>

  <!-- flange converted to full link so we can assign inertial -->
  <link name="flange">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="24.9"/>
      <inertia ixx="0.08798" ixy="0" ixz="0" iyy="0.08798" iyz="0" izz="0.13446"/>
    </inertial>
  </link>

  <joint name="joint_a1" type="revolute">
    <origin xyz="0 0 0.75" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="link_1"/>
    <axis xyz="0 0 -1"/>
    <limit effort="0" lower="${radians(-185)}" upper="${radians(185)}" velocity="${radians(110)}"/>
  </joint>
  <joint name="joint_a2" type="revolute">
    <origin xyz="0.35 0 0" rpy="0 0 0"/>
    <parent link="link_1"/>
    <child link="link_2"/>
    <axis xyz="0 1 0"/>
    <limit effort="0" lower="${radians(-146)}" upper="${radians(0)}" velocity="${radians(110)}"/>
  </joint>
  <joint name="joint_a3" type="revolute">
    <origin xyz="1.25 0 0" rpy="0 0 0"/>
    <parent link="link_2"/>
    <child link="link_3"/>
    <axis xyz="0 1 0"/>
    <limit effort="0" lower="${radians(-119)}" upper="${radians(155)}" velocity="${radians(100)}"/>
  </joint>
  <joint name="joint_a4" type="revolute">
    <origin xyz="0 0 -0.055" rpy="0 0 0"/>
    <parent link="link_3"/>
    <child link="link_4"/>
    <axis xyz="-1 0 0"/>
    <limit effort="0" lower="${radians(-350)}" upper="${radians(350)}" velocity="${radians(170)}"/>
  </joint>
  <joint name="joint_a5" type="revolute">
    <origin xyz="1.1 0 0" rpy="0 0 0"/>
    <parent link="link_4"/>
    <child link="link_5"/>
    <axis xyz="0 1 0"/>
    <limit effort="0" lower="${radians(-125)}" upper="${radians(125)}" velocity="${radians(170)}"/>
  </joint>
  <joint name="joint_a6" type="revolute">
    <origin xyz="0.23 0 0" rpy="0 0 0"/>
    <parent link="link_5"/>
    <child link="link_6"/>
    <axis xyz="-1 0 0"/>
    <limit effort="0" lower="${radians(-350)}" upper="${radians(350)}" velocity="${radians(238)}"/>
  </joint>
  <joint name="joint_a6-flange" type="fixed">
    <parent link="link_6"/>
    <child link="flange"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <link name="base" />
  <joint name="base_link-base" type="fixed">
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="base"/>
  </joint>

  <link name="tool0" />
  <joint name="flange-tool0" type="fixed">
    <parent link="flange"/>
    <child link="tool0"/>
    <origin xyz="0 0 0" rpy="0 ${radians(90)} 0"/>
  </joint>

</robot>

